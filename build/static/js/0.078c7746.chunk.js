"use strict";(self.webpackChunksinecloud=self.webpackChunksinecloud||[]).push([[0],{7e3:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(3433),s=n(9439),c=n(2791),u=n(6710),a=n(7912),o=n(4626),i=n(8126),f=n(2256),l=n(5646),d=n(184),h=function(e){switch(e){case"faultradio":return a;case"kioskradio":return o;case"nts-latest":return i;case"thelotradio":return f;case"trnstnradio":return l;default:return null}},m=function(){var e=(0,c.useState)([]),t=(0,s.Z)(e,2),n=t[0],a=t[1],o=(0,c.useState)(""),i=(0,s.Z)(o,2),f=i[0],l=i[1],m=(0,c.useState)(0),v=(0,s.Z)(m,2),g=v[0],b=v[1],j=(0,c.useState)(!1),k=(0,s.Z)(j,2),p=k[0],w=k[1],x=(0,c.useRef)([]),E=(0,c.useRef)(),Z=(0,c.useTransition)({timeoutMs:3e3}),N=(0,s.Z)(Z,2),I=N[0],S=N[1],R=function(){p||S((function(){w(!0),fetch("http://localhost:4000/api/soundcloud?offset=".concat(g,"&limit=").concat(5)).then((function(e){if(!e.ok)throw new Error("Request failed with status "+e.status);return e.json()})).then((function(e){console.log(e),a((function(t){return[].concat((0,r.Z)(t),(0,r.Z)(e.message))})),b((function(e){return e+5})),w(!1)})).catch((function(e){console.error(e),w(!1)}))}))};return(0,c.useEffect)((function(){R()}),[]),(0,c.useEffect)((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&l(e.target.dataset.user)}))}),{threshold:.5});return x.current.forEach((function(t){t&&e.observe(t)})),function(){x.current.forEach((function(t){t&&e.unobserve(t)}))}}),[n]),(0,c.useEffect)((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&!p&&R()}))}),{threshold:.2});return E.current&&e.observe(E.current),function(){E.current&&e.unobserve(E.current)}}),[n,p]),(0,d.jsxs)("div",{className:"feed",children:[(0,d.jsx)("h1",{children:I?"Loading...":null}),(0,d.jsxs)("h1",{children:["Feed me ",(0,d.jsx)("br",{className:"break-title"}),"new music"]}),(0,d.jsx)("div",{className:"rotate-div"}),(0,d.jsx)("div",{className:"img-container",children:n.length>0&&(0,d.jsx)("img",{src:h(f),className:"radio-station-img",alt:f})}),n.map((function(e,t){var r=t===n.length-1;return(0,d.jsx)("div",{className:"feed-player-container","data-user":e.user,ref:function(e){x.current.push(e),r&&(E.current=e)},children:(0,d.jsx)(u.Z,{url:e.track.url,className:"react-player"})},t)}))]})}}}]);
//# sourceMappingURL=0.078c7746.chunk.js.map