"use strict";(self.webpackChunksinecloud=self.webpackChunksinecloud||[]).push([[0],{7e3:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var r=t(3433),s=t(9439),c=t(2791),u=t(6710),a=t(7912),o=t(4626),i=t(8126),f=t(2256),l=t(5646),d=t(184),h=function(e){switch(e){case"faultradio":return a;case"kioskradio":return o;case"nts-latest":return i;case"thelotradio":return f;case"trnstnradio":return l;default:return null}},m=function(){var e=(0,c.useState)([]),n=(0,s.Z)(e,2),t=n[0],a=n[1],o=(0,c.useState)(""),i=(0,s.Z)(o,2),f=i[0],l=i[1],m=(0,c.useState)(0),v=(0,s.Z)(m,2),b=v[0],g=v[1],j=(0,c.useState)(!1),k=(0,s.Z)(j,2),p=k[0],w=k[1],x=(0,c.useRef)([]),E=(0,c.useRef)(),Z=(0,c.useTransition)({timeoutMs:3e3}),N=(0,s.Z)(Z,2),I=N[0],S=N[1],C=(0,c.useCallback)((function(){p||S((function(){w(!0),fetch("https://sinecloud-server.onrender.com/api/soundcloud?offset=".concat(b,"&limit=").concat(5)).then((function(e){if(!e.ok)throw new Error("Request failed with status "+e.status);return e.json()})).then((function(e){console.log(e),a((function(n){return[].concat((0,r.Z)(n),(0,r.Z)(e.message))})),g((function(e){return e+5})),w(!1)})).catch((function(e){console.error(e),w(!1)}))}))}),[p,b,5]);return(0,c.useEffect)((function(){C()}),[C]),(0,c.useEffect)((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&l(e.target.dataset.user)}))}),{threshold:.5});return x.current.forEach((function(n){n&&e.observe(n)})),function(){x.current.forEach((function(n){n&&e.unobserve(n)}))}}),[t]),(0,c.useEffect)((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&!p&&C()}))}),{threshold:.2});return E.current&&e.observe(E.current),function(){E.current&&e.unobserve(E.current)}}),[t,p]),(0,d.jsxs)("div",{className:"feed",children:[(0,d.jsx)("h1",{children:I?"Loading...":null}),(0,d.jsxs)("h1",{children:["Feed me ",(0,d.jsx)("br",{className:"break-title"}),"new music"]}),(0,d.jsx)("div",{className:"rotate-div"}),(0,d.jsx)("div",{className:"img-container",children:t.length>0&&(0,d.jsx)("img",{src:h(f),className:"radio-station-img",alt:f})}),t.map((function(e,n){var r=n===t.length-1;return(0,d.jsx)("div",{className:"feed-player-container","data-user":e.user,ref:function(e){x.current.push(e),r&&(E.current=e)},children:(0,d.jsx)(u.Z,{url:e.track.url,className:"react-player"})},n)}))]})}}}]);
//# sourceMappingURL=0.2f5116c7.chunk.js.map